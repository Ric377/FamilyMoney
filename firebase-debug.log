[debug] [2025-07-20T15:57:59.715Z] ----------------------------------------------------------------------
[debug] [2025-07-20T15:57:59.718Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\ricch\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-07-20T15:57:59.719Z] CLI Version:   14.11.0
[debug] [2025-07-20T15:57:59.719Z] Platform:      win32
[debug] [2025-07-20T15:57:59.719Z] Node Version:  v22.17.1
[debug] [2025-07-20T15:57:59.719Z] Time:          Sun Jul 20 2025 23:57:59 GMT+0800 (Иркутск, стандартное время)
[debug] [2025-07-20T15:57:59.720Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-07-20T15:57:59.939Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-20T15:57:59.939Z] > authorizing via signed-in user (rich.david.07@gmail.com)
[debug] [2025-07-20T15:57:59.940Z] [iam] checking project family-money-fdde5 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-07-20T15:57:59.941Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:57:59.941Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:57:59.942Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5:testIamPermissions [none]
[debug] [2025-07-20T15:57:59.942Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5:testIamPermissions x-goog-quota-user=projects/family-money-fdde5
[debug] [2025-07-20T15:57:59.942Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-20T15:58:01.152Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5:testIamPermissions 200
[debug] [2025-07-20T15:58:01.152Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-20T15:58:01.152Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:01.152Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:01.152Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/family-money-fdde5/serviceAccounts/family-money-fdde5@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-07-20T15:58:01.152Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/family-money-fdde5/serviceAccounts/family-money-fdde5@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-07-20T15:58:02.340Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/family-money-fdde5/serviceAccounts/family-money-fdde5@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-07-20T15:58:02.340Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/family-money-fdde5/serviceAccounts/family-money-fdde5@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'family-money-fdde5'...
[info] 
[info] i  deploying functions 
[debug] [2025-07-20T15:58:02.344Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:02.344Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:02.344Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5 [none]
[debug] [2025-07-20T15:58:02.770Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5 200
[debug] [2025-07-20T15:58:02.771Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5 {"projectNumber":"965519537654","projectId":"family-money-fdde5","lifecycleState":"ACTIVE","name":"Family Money","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-04-26T10:22:21.185434Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-07-20T15:58:02.776Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:02.777Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:02.777Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/family-money-fdde5/adminSdkConfig [none]
[debug] [2025-07-20T15:58:03.794Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/family-money-fdde5/adminSdkConfig 200
[debug] [2025-07-20T15:58:03.794Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/family-money-fdde5/adminSdkConfig {"projectId":"family-money-fdde5","storageBucket":"family-money-fdde5.firebasestorage.app"}
[debug] [2025-07-20T15:58:03.795Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:03.795Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:03.795Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/family-money-fdde5/configs [none]
[debug] [2025-07-20T15:58:04.527Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/family-money-fdde5/configs 200
[debug] [2025-07-20T15:58:04.527Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/family-money-fdde5/configs {}
[debug] [2025-07-20T15:58:04.531Z] Validating nodejs source
[debug] [2025-07-20T15:58:05.792Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "22"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^13.4.0",
    "firebase-functions": "^6.4.0"
  },
  "devDependencies": {
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2025-07-20T15:58:05.793Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-07-20T15:58:05.794Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-07-20T15:58:05.806Z] Found firebase-functions binary at 'D:\Android\Projects\FamilyMoney\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8713

[debug] [2025-07-20T15:58:06.550Z] Got response from /__/functions.yaml {"endpoints":{"sendPaymentNotification":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["europe-west1"],"labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"groups/{groupId}/payments/{paymentId}"},"retry":false},"entryPoint":"sendPaymentNotification"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-07-20T15:58:10.587Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-20T15:58:10.587Z] > authorizing via signed-in user (rich.david.07@gmail.com)
[debug] [2025-07-20T15:58:10.588Z] [iam] checking project family-money-fdde5 for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-07-20T15:58:10.588Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:10.588Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:10.588Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5:testIamPermissions [none]
[debug] [2025-07-20T15:58:10.588Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5:testIamPermissions x-goog-quota-user=projects/family-money-fdde5
[debug] [2025-07-20T15:58:10.588Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-20T15:58:11.753Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5:testIamPermissions 200
[debug] [2025-07-20T15:58:11.754Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-20T15:58:11.754Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:11.754Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:11.754Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/family-money-fdde5/instances pageSize=100&pageToken=
[debug] [2025-07-20T15:58:12.743Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/family-money-fdde5/instances 200
[debug] [2025-07-20T15:58:12.743Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/family-money-fdde5/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged D:\Android\Projects\FamilyMoney\functions (69.01 KB) for uploading 
[debug] [2025-07-20T15:58:12.781Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:12.781Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:12.781Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/family-money-fdde5/locations/-/functions [none]
[debug] [2025-07-20T15:58:13.800Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/family-money-fdde5/locations/-/functions 200
[debug] [2025-07-20T15:58:13.800Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/family-money-fdde5/locations/-/functions {}
[debug] [2025-07-20T15:58:13.801Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:13.801Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:13.801Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/family-money-fdde5/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-07-20T15:58:15.095Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/family-money-fdde5/locations/-/functions 200
[debug] [2025-07-20T15:58:15.096Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/family-money-fdde5/locations/-/functions {"functions":[{"name":"projects/family-money-fdde5/locations/europe-west1/functions/sendPaymentNotification","buildConfig":{"build":"projects/965519537654/locations/europe-west1/builds/c6f278d9-a5ef-44ac-9c05-87dbf311ebc7","runtime":"nodejs22","entryPoint":"sendPaymentNotification","source":{"storageSource":{"bucket":"gcf-v2-sources-965519537654-europe-west1","object":"sendPaymentNotification/function-source.zip","generation":"1753026810347010"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/family-money-fdde5/locations/europe-west1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-965519537654-europe-west1","object":"sendPaymentNotification/function-source.zip","generation":"1753026810347010"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/family-money-fdde5/serviceAccounts/965519537654-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/family-money-fdde5/locations/europe-west1/services/sendpaymentnotification","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"family-money-fdde5\",\"storageBucket\":\"family-money-fdde5.firebasestorage.app\"}","GCLOUD_PROJECT":"family-money-fdde5","EVENTARC_CLOUD_EVENT_SOURCE":"projects/family-money-fdde5/locations/europe-west1/services/sendPaymentNotification","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"sendPaymentNotification","LOG_EXECUTION_ID":"true"},"maxInstanceCount":3,"ingressSettings":"ALLOW_ALL","uri":"https://sendpaymentnotification-qzyqjqr7kq-ew.a.run.app","serviceAccountEmail":"965519537654-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sendpaymentnotification-00007-tac","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/family-money-fdde5/locations/europe-west1/triggers/sendpaymentnotification-100953","triggerRegion":"europe-west1","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"groups/{groupId}/payments/{paymentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/family-money-fdde5/topics/eventarc-europe-west1-sendpaymentnotification-100953-049","serviceAccountEmail":"965519537654-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2025-07-20T15:54:17.380692461Z","labels":{"firebase-functions-hash":"902008f2ae949c4cf55854d186924a20d7f94cb9","deployment-tool":"cli-firebase"},"environment":"GEN_2","url":"https://europe-west1-family-money-fdde5.cloudfunctions.net/sendPaymentNotification","createTime":"2025-07-18T17:29:00.869138387Z","satisfiesPzi":true}]}
[debug] [2025-07-20T15:58:15.097Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:15.097Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:15.098Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/family-money-fdde5/databases/(default) [none]
[debug] [2025-07-20T15:58:15.706Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/family-money-fdde5/databases/(default) 200
[debug] [2025-07-20T15:58:15.706Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/family-money-fdde5/databases/(default) {"name":"projects/family-money-fdde5/databases/(default)","uid":"a96954a7-88f1-4266-9d91-8d5ecce6ad94","createTime":"2025-04-26T14:44:23.032144Z","updateTime":"2025-04-26T14:44:23.032144Z","locationId":"europe-west1","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-07-20T14:58:15.794785Z","appEngineIntegrationMode":"DISABLED","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","freeTier":true,"etag":"IMWjzurmy44DML6p1J6C9owD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-07-20T15:58:15.709Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:15.709Z] Checked if tokens are valid: true, expires at: 1753030115073
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-07-20T15:58:15.709Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:15.709Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:15.709Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/965519537654/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-07-20T15:58:15.709Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/965519537654/services/pubsub.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/965519537654
[debug] [2025-07-20T15:58:15.709Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/965519537654/services/pubsub.googleapis.com:generateServiceIdentity {}
[debug] [2025-07-20T15:58:15.711Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/965519537654/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-07-20T15:58:15.711Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/965519537654/services/eventarc.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/965519537654
[debug] [2025-07-20T15:58:15.711Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/965519537654/services/eventarc.googleapis.com:generateServiceIdentity {}
[debug] [2025-07-20T15:58:16.561Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/965519537654/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-07-20T15:58:16.561Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/965519537654/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-965519537654@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"100076589435553714308"}}
[debug] [2025-07-20T15:58:16.628Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/965519537654/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-07-20T15:58:16.628Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/965519537654/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-965519537654@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"102486222478863119286"}}
[debug] [2025-07-20T15:58:16.631Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:16.631Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:16.631Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5 [none]
[debug] [2025-07-20T15:58:16.907Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5 200
[debug] [2025-07-20T15:58:16.908Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/family-money-fdde5 {"projectNumber":"965519537654","projectId":"family-money-fdde5","lifecycleState":"ACTIVE","name":"Family Money","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-04-26T10:22:21.185434Z"}
[debug] [2025-07-20T15:58:16.908Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:16.908Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:16.908Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/965519537654 [none]
[debug] [2025-07-20T15:58:17.544Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/965519537654 403
[debug] [2025-07-20T15:58:17.544Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/965519537654 {"error":{"code":403,"message":"Compute Engine API has not been used in project 965519537654 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 965519537654 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"serviceTitle":"Compute Engine API","service":"compute.googleapis.com","consumer":"projects/965519537654","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654","containerInfo":"965519537654"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 965519537654 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654"}]}]}}
[debug] [2025-07-20T15:58:17.544Z] unable to look up default compute service account. Falling back to 965519537654-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 965519537654 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 965519537654 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"serviceTitle":"Compute Engine API","service":"compute.googleapis.com","consumer":"projects/965519537654","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654","containerInfo":"965519537654"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 965519537654 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/965519537654 had HTTP Error: 403, Compute Engine API has not been used in project 965519537654 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=965519537654 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-07-20T15:58:17.545Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:17.545Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:17.545Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/family-money-fdde5/billingInfo [none]
[debug] [2025-07-20T15:58:18.754Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/family-money-fdde5/billingInfo 200
[debug] [2025-07-20T15:58:18.754Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/family-money-fdde5/billingInfo {"name":"projects/family-money-fdde5/billingInfo","projectId":"family-money-fdde5","billingAccountName":"billingAccounts/01FB4E-738AB4-54080A","billingEnabled":true}
[debug] [2025-07-20T15:58:18.756Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:18.756Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:18.756Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/family-money-fdde5/locations/europe-west1/functions:generateUploadUrl [none]
[debug] [2025-07-20T15:58:19.153Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/family-money-fdde5/locations/europe-west1/functions:generateUploadUrl 200
[debug] [2025-07-20T15:58:19.153Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/family-money-fdde5/locations/europe-west1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-965519537654.europe-west1.cloudfunctions.appspot.com/f9fa2a2c-ff87-442e-8d08-6ffff801fabc.zip?GoogleAccessId=service-965519537654@gcf-admin-robot.iam.gserviceaccount.com&Expires=1753028899&Signature=JzZKrSgSXnh0fPkpBM4EDQNeepVkxZq4OaqPouD2jsZT00nRxsOq5g3esXA5IAyIkVqz%2FFOKA0wYX%2FOviXtfRZjVqwlGkmKsXxn9jEeoG84KpbfxaXMwjDIw2yC9tuN1ltyDcS6T4h0GmcZQGWkw53gMsmdIZiL7NXTqXkIDEsOuJa%2Bmu%2Fjtslef2YhMarjB40OZJBiYbIBMXNM4UjRIia0mOXqM947%2FBel%2FoHeGVZAti6UD7GvIiirzjJKy%2BvBipsps0eaOdVXutalFrmQ8zqqDoFY93%2FN4xgHwZtCbpCiN2Nc21Gj1P5p3dBXa1rDQuVtfua9IUByVYqfRQpFmVA%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-965519537654.europe-west1.cloudfunctions.appspot.com","object":"f9fa2a2c-ff87-442e-8d08-6ffff801fabc.zip"}}
[debug] [2025-07-20T15:58:19.154Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-965519537654.europe-west1.cloudfunctions.appspot.com/f9fa2a2c-ff87-442e-8d08-6ffff801fabc.zip GoogleAccessId=service-965519537654%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1753028899&Signature=JzZKrSgSXnh0fPkpBM4EDQNeepVkxZq4OaqPouD2jsZT00nRxsOq5g3esXA5IAyIkVqz%2FFOKA0wYX%2FOviXtfRZjVqwlGkmKsXxn9jEeoG84KpbfxaXMwjDIw2yC9tuN1ltyDcS6T4h0GmcZQGWkw53gMsmdIZiL7NXTqXkIDEsOuJa%2Bmu%2Fjtslef2YhMarjB40OZJBiYbIBMXNM4UjRIia0mOXqM947%2FBel%2FoHeGVZAti6UD7GvIiirzjJKy%2BvBipsps0eaOdVXutalFrmQ8zqqDoFY93%2FN4xgHwZtCbpCiN2Nc21Gj1P5p3dBXa1rDQuVtfua9IUByVYqfRQpFmVA%3D%3D
[debug] [2025-07-20T15:58:19.154Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-965519537654.europe-west1.cloudfunctions.appspot.com/f9fa2a2c-ff87-442e-8d08-6ffff801fabc.zip [stream]
[debug] [2025-07-20T15:58:19.851Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-965519537654.europe-west1.cloudfunctions.appspot.com/f9fa2a2c-ff87-442e-8d08-6ffff801fabc.zip 200
[debug] [2025-07-20T15:58:19.851Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-965519537654.europe-west1.cloudfunctions.appspot.com/f9fa2a2c-ff87-442e-8d08-6ffff801fabc.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 22 (2nd Gen) function sendPaymentNotification(europe-west1)... 
[debug] [2025-07-20T15:58:19.857Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:19.857Z] Checked if tokens are valid: true, expires at: 1753030115073
[debug] [2025-07-20T15:58:19.857Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/family-money-fdde5/locations/europe-west1/functions/sendPaymentNotification updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion
[debug] [2025-07-20T15:58:19.857Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/family-money-fdde5/locations/europe-west1/functions/sendPaymentNotification {"name":"projects/family-money-fdde5/locations/europe-west1/functions/sendPaymentNotification","buildConfig":{"runtime":"nodejs22","entryPoint":"sendPaymentNotification","source":{"storageSource":{"bucket":"gcf-v2-uploads-965519537654.europe-west1.cloudfunctions.appspot.com","object":"f9fa2a2c-ff87-442e-8d08-6ffff801fabc.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"family-money-fdde5\",\"storageBucket\":\"family-money-fdde5.firebasestorage.app\"}","GCLOUD_PROJECT":"family-money-fdde5","EVENTARC_CLOUD_EVENT_SOURCE":"projects/family-money-fdde5/locations/europe-west1/services/sendPaymentNotification","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"sendPaymentNotification","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"c22d24ccdc5970ceadda08e3c7ec114bb4fa4d3d"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"groups/{groupId}/payments/{paymentId}","operator":"match-path-pattern"}],"triggerRegion":"europe-west1"}}
